!function(t){function i(e){if(n[e])return n[e].exports;var s=n[e]={exports:{},id:e,loaded:!1};return t[e].call(s.exports,s,s.exports,i),s.loaded=!0,s.exports}var n={};return i.m=t,i.c=n,i.p="",i(0)}([function(t,i,n){"use strict";var e=n(2),s=n(1),r=n(3),a=n(4),o=n(6),l=n(5),c={name:"",title:"",skill_intro:"",subject_intro:"",person_intro:"",skill_price:"",skill_time:"",img_data:null};o.config={name:"isNonEmpty",title:"isNonEmpty",skill_intro:"isNonEmpty",subject_intro:"isNonEmpty",person_intro:"isNonEmpty",skill_price:"isNonEmpty",skill_time:"isNonEmpty",img_data:"isNonEmpty"};var u={init:function(){s(),e()||(r.EVENT_TYPE="click"),u.initEvent()},initEvent:function(){$("#file").on("change",function(){var t=this.files[0],i=t.type.split("/")[1].toLowerCase();return-1==$.inArray(i,l.imgType)?(alert("仅支持gif,png,jpg,jpeg格式的图片"),void $(this).val("")):t.size/1024>9006?(alert("图片最大不能超过6Mb"),void $(this).val("")):void(c.img_data=t)}),$("#register-button").on(r.EVENT_TYPE,function(){var t=$(this);if(!t.hasClass("disable")){if(c.name=$("#name").val(),c.title=$("#title").val(),c.skill_intro=$("#skill_intro").val(),c.subject_intro=$("#subject_intro").val(),c.person_intro=$("#person_intro").val(),c.skill_price=$("#skill_price").val(),c.skill_time=$("#skill_time").val(),o.validate(c))return void alert(o.messages[0]);t.addClass("disable").html("正在报名"),a.add(c).done(function(i){i=JSON.parse(i),0==i.code?(alert("报名成功"),location.reload()):t.html("报名失败，请重试").removeClass("disable")}).fail(function(){t.html("报名失败，请重试").removeClass("disable")})}})}};u.init()},function(t,i){"use strict";t.exports=function(){top!==self&&(top.location.href=this.location.href,console.log("防DNS劫持"))}},function(t,i){"use strict";t.exports=function(){return navigator.userAgent.match(/Android/i)||navigator.userAgent.match(/webOS/i)||navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/iPod/i)||navigator.userAgent.match(/BlackBerry/i)||navigator.userAgent.match(/Windows Phone/i)?!0:!1}},function(t,i){"use strict";var n={};n.EVENT_TYPE="tap",t.exports=n},function(t,i){"use strict";function n(t,i,n,e,s){return $.ajax({url:t,type:i,data:n,processData:!1,contentType:!1,success:function(t){e&&e(t)},error:function(t){s&&s(t)}})}var e={};e.add=function(t){var i=new FormData;return i.append("img_data",t.img_data),i.append("name",t.name),i.append("title",t.title),i.append("person_intro",t.person_intro),i.append("subject_intro",t.subject_intro),i.append("skill_intro",t.skill_intro),i.append("skill_price",t.skill_price),i.append("skill_time",t.skill_time),n("/manage/index/add","POST",i)},t.exports=e},function(t,i){"use strict";var n={imgType:["gif","jpeg","jpg","png"]};t.exports=n},function(t,i){"use strict";var n={config:{},messages:[],types:{isEmail:{validate:function(t){var i=/^\w+((-\w+)|(\.\w+))*\@[A-Za-z0-9]+((\.|-)[A-Za-z0-9]+)*\.[A-Za-z0-9]+$/;return i.test(t)},instructions:"邮箱格式错误"},isNonEmpty:{validate:function(t){return""!=t},instructions:"信息不能为空"},isWeChat:{validate:function(t){var i=/^[a-zA-Z\d_]{5,}$/;return i.test(t)},instructions:"微信号码有误"},isPassword:{validate:function(t){if(t.length<6)return!1;var i=/^(([a-z]+[\w]*[0-9]+)|([0-9]+[\w]*[a-z]+))[a-z0-9]*$/i;return i.test(t)},instructions:"密码长度在6-20位，且必须包含数字和字母"},isNickname:{validate:function(t){return t.length>8||""==t?!1:!0},instructions:"昵称字符长度要在8个以内"},isCondition:{validate:function(t){return!(t.length<30)},instructions:"心动条件长度要在10个以上"}},validate:function(t){var i,n,e,s,r;this.messages=[];for(i in t)if(t.hasOwnProperty(i)){if(e=this.config[i],s=this.types[e],!e)continue;if(!s)throw{name:"ValidationError",message:"No handler to validate type "+e};r=s.validate(t[i]),r||(n=s.instructions,this.messages.push(n))}return this.hasErrors()},hasErrors:function(){return 0!==this.messages.length}};t.exports=n}]);